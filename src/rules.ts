/// looks like some pattern here

let rules = [
  // 0. lean arrows
  "00110011011011111101100111101110010000011111001111010100000001110010010011100010001110011001011011001111000100100010111010001011001100001101001101101000000110100001110110011100000111010110011101111011000001001001110001111110011011111111000100011010111010011110000101110101110010011001101101111001111000111010000100001111010001011000000010111001100000111100011000100010001011110100001111101111100010000010000101111010110100100101001100111001001011010010000000101000101000101101111100101000000111000100110100011110",
  // 1. top down waves
  "00111011010001111100110100101101001100010100001010010011011100011010000100010110010101101101101110101110011010111101100111000111000011000110110010010100110010111110000101000010111011101110011100011110100100110100100101101100110010111001000001110010111111001111101000011111011101001011010001101001110111010110101111000001011110010010100011110110101001110101100111101110011101110111001000100000100000100111011100100110100011011100011100000110100001100111010000100110000011001111100011111001011100000101111001010100",
  // 2. triangles
  "00011000101011101111101100110011110000110111011011010110010001011010110001101110111111000011000010111100011011010011000111010011011101110100001011100100101011110000111110101011111010011001010010111001010101000111111110010110110010001101000111101111010010111001100100001011101000110111011100011110010011100010111000001101011011111101100101001111101011111100001111001011000000110110100011010001110110101011011111111101010101110010011011011101110000011010111001000101101011000101001110101101100101110010001000010000",
  // 3. rain to trees
  "01111011101111010100011101101001110011111101001000100110111100110100101011010011000000111000001101111000111011101100000010011010001001010000000010011000000101110010110000111101100011010101111101001001111011101101101110100010010000110110111001111111110110111000011110110111110001000011110010101111110110010001110000011010101001001111110100101010110001111100000111111110111010000111101011011111010101001000001110011101101101111101111100011100011010100001110110101111011001001011101010010111001001010010000001011110",
  // 4. maybe stable
  "10111100001010000100110000110111011001110001101101100110011001110110001101101010000011010001001000111001101010111111011000111001011101011110110001110110110111001110111110111110101110011000110000111011100010111001100110110100110001100010100110000100111101001101000010100100000101000100001000010110101011100101010111100111010011100110000000111010010101011001010000101001011100101001000110101011100000000111100111010001100001001000111100001111100000100010011110111101001011101110100100100100011010001110011010101110",
  // 5. triangle patterns
  "00010111101100110011001111110111111101000000101100100010110000000111101110101011001011110001101001100111111010000010100001101110100000011101001000111110101001001101100010000000011011101001101111111011001000110011111011010001101111011011101101001100100011011101011010110010110010100110001010101100110110101100101001010110011100101001111101111100101111100000101100010100000100010011101001000010110010101001001110100110100111001110111100110100110000011011001010100010010000010001001011001110010111110101101000001100",
  // 6. unstable triangle
  "00101011101100110001100101101001110110001000100011001110101110011010011110111000101011010000110100011010101000100110110011100111000011010100101100110010110110101011100111100111011111000111010010111000100111011110000001000111101101100110011010000011110111101000000011010100110010001011011000011001101100110101000100100100100001010011111011011100100010010100010101110110100111100000001011101011101101111010011110101000001000010111101001101110000100000010101001111100111101000101010000101011110101000100000001000110",
  // 7. slow growth
  "00011110110110001011111001001101000010101110101011010001110010011000111001110011110100000101101111010001101111100111101000111110011111000100111001001101001010011011111101100000110001111100110101111001011100110001011101010010101101001100001001110110001010111100010010111110001001011011110110011100011110101011110010011110100101001001101010110000111110100011100111101001111111011000111100101001001101100001010110010011000000101111001110000110101110011010011011101100110101101010001011010101110011011000011010001110",
  // 8. clean triangles
  "00101101110110111000010000101011000101000010010110101111110101011000010110011101010100001011110101100110001101001111100100000101000011001100100010000000111011010011101001111010001010110001100010100111010110001001100110111111110100111110110010011110101011100110011101001100000100001000111100110011100001110111101000100110101011000000001011100110001010110000100010000010101001000111011000000011100001101110000000110011010110010111110000111001011110000001010111110111000011111111110111111011110101101111110000101010",
  // 9. village
  "011100001100011110100100010100000010000110111001111010101101000010001011111010000000100110011111011110001000101100010010011110110001001100101010011110010101011000000110011101111000011111100010011101110111111101010100110101000100110111100101001001101110110010011010000110100011110101100011101011001011011001111011110100011000111110111000001101100111101111001100010000101100000011001110000001001010100100011011100001101011011011001100011010110100110111001100011000001001001001110001001011111111111011100111110101100",
  // 10. triangles arise
  "01110100000110101111010100100010010100000100011001011111010000011000111010000011011110001100010001000000000101110110000011110000011110101111111011100100000100010001010001010000111011111111001010011110111000010000010001110000000100101101100110110011000111100101101100101000100000001111110011011100011000111101011010100100001001000110101101001000101010111111010110001111001101011100001101010111100011100000100011001001100100111111010111110010010100110100100100110100010010100000010101111000101000011100101011111100",
  // 11. sewing
  "01010110001000000111011010010111110100011101111010110001111001110111100011101110101011110000001010001110001011011111101010100100111000101001111010101001000110010001110010101001011100001011101011010010011100100001001011000100001100011000110011101011110101010011111010011101011100010000000001011000000100100101010010111010010100000111010000011100110011101100110110010100101101111011111000100011111101111111101010001111100111110101111111111110111101011110001001001001111111111000101111010110100111010000010100101100",
].map((x) => x.split("").map(Number));

export let getRules = () => {
  let rulesData = new Uint32Array(2 ** 9);
  for (let i = 0; i < 2 ** 9; i++) {
    rulesData[i] = Math.random() < 0.5 ? 1 : 0;
    // rulesData[i] = rules[11][i];
    // rulesData[i] = 1;
  }

  return rulesData;
};

export let getInitialCells = (width: number, height: number) => {
  let cells = new Uint32Array(width * height);
  for (let i = 0; i < width * height; i++) {
    cells[i] = Math.random() < 0.5 ? 1 : 0;
    // 400 pixles radius near the center, write 1
    // let radius = 400;
    // let x = i % width;
    // let y = Math.floor(i / width);
    // if ((x - width / 2) ** 2 + (y - height / 2) ** 2 < radius ** 2) {
    //   // random
    //   cells[i] = Math.random() < 0.5 ? 1 : 0;
    // } else {
    //   cells[i] = 0;
    // }
  }

  return cells;
};
